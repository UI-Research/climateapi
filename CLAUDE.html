<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>climateapi Package Development Notes • climateapi</title><script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="climateapi Package Development Notes"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">climateapi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="articles/economic_recovery_factsheet.html">Economic Recovery Post Disaster</a></li>
    <li><a class="dropdown-item" href="articles/get_sheldus.html">SHELDUS Hazard Data</a></li>
    <li><a class="dropdown-item" href="articles/get_structures.html">USA Structures Data</a></li>
    <li><a class="dropdown-item" href="articles/get_wildfire_burn_zones.html">Wildfire Burn Zones</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-title-body">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>climateapi Package Development Notes</h1>

    </div>

<div id="climateapi-package-development-notes" class="section level1">

<div class="section level2">
<h2 id="performance-critical-functions">Performance-Critical Functions<a class="anchor" aria-label="anchor" href="#performance-critical-functions"></a></h2>
<p>The following functions rely on large input datasets and are slow. Speed optimizations using <code>duckplyr</code>, <code>parquet</code>, <code>arrow</code>, and <code>tidytable</code> are critical for these functions:</p>
<ul><li>
<code><a href="reference/get_ihp_registrations.html">get_ihp_registrations()</a></code> - IHP registration data can be very large (millions of records)</li>
<li>
<code><a href="reference/get_nfip_policies.html">get_nfip_policies()</a></code> - NFIP policy data exceeds 80 million records nationally</li>
<li>
<code><a href="reference/get_nfip_claims.html">get_nfip_claims()</a></code> - NFIP claims data exceeds 2 million records</li>
</ul><div class="section level3">
<h3 id="testing-strategy-for-large-data-functions">Testing Strategy for Large-Data Functions<a class="anchor" aria-label="anchor" href="#testing-strategy-for-large-data-functions"></a></h3>
<p>Tests for these functions load data once at the top of the test file and reuse that object for all success tests. This avoids repeated I/O during test runs. Validation tests (expected to fail) call the function directly without using the cached data object.</p>
</div>
<div class="section level3">
<h3 id="performance-considerations">Performance Considerations<a class="anchor" aria-label="anchor" href="#performance-considerations"></a></h3>
<p>When modifying these functions: - Prefer <code><a href="https://arrow.apache.org/docs/r/reference/read_parquet.html" class="external-link">arrow::read_parquet()</a></code> over CSV reads - Use <code>tidytable</code> or <code>dtplyr</code> for grouped operations on large data - Avoid loading full datasets into memory when filtering is possible - Consider chunked processing for extremely large files</p>
</div>
</div>
<div class="section level2">
<h2 id="testing-philosophy">Testing Philosophy<a class="anchor" aria-label="anchor" href="#testing-philosophy"></a></h2>
<p><strong>Do not create skip functions for unavailable dependencies.</strong> If a test requires a package (like <code>tidycensus</code>) or a resource (like Box), that dependency should be available when tests run. If something is missing, that’s a real problem to fix, not work around with skip logic.</p>
<p>The only acceptable skip pattern is for tests that require external data sources that legitimately may not be configured in all environments (e.g., Box path for large data files). Even then, the validation and signature tests should still run.</p>
</div>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Will Curran-Groome, Kameron Lloyd.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

