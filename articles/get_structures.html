<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>USA Structures Data • climateapi</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="USA Structures Data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">climateapi</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9001</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/economic_recovery_factsheet.html">Economic Recovery Post Disaster</a></li>
    <li><a class="dropdown-item" href="../articles/get_sheldus.html">SHELDUS Hazard Data</a></li>
    <li><a class="dropdown-item" href="../articles/get_structures.html">USA Structures Data</a></li>
    <li><a class="dropdown-item" href="../articles/get_wildfire_burn_zones.html">Wildfire Burn Zones</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>USA Structures Data</h1>
            
      

      <div class="d-none name"><code>get_structures.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h2>
<p>The <code><a href="../reference/get_structures.html">get_structures()</a></code> function retrieves building
footprint data from the USA Structures dataset and summarizes structure
counts by type at the tract or county level. This is useful for
estimating the number and types of buildings within areas affected by
natural hazards.</p>
</div>
<div class="section level2">
<h2 id="data-source">Data source<a class="anchor" aria-label="anchor" href="#data-source"></a>
</h2>
<p>Data are sourced from the USA Structures dataset maintained by the
Department of Homeland Security. The dataset contains building
footprints derived from high-resolution imagery for structures across
the United States.</p>
<p>See <a href="https://geoplatform.gov/metadata/9d4a3ae3-8637-4707-92a7-b7d67b769a6b" class="external-link">https://geoplatform.gov/metadata/9d4a3ae3-8637-4707-92a7-b7d67b769a6b</a>
for more information.</p>
</div>
<div class="section level2">
<h2 id="loading-the-data">Loading the data<a class="anchor" aria-label="anchor" href="#loading-the-data"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ui-research.github.io/climateapi/">climateapi</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-spatial.github.io/sf/" class="external-link">sf</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/UrbanInstitute/urbnthemes" class="external-link">urbnthemes</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/urbnthemes/man/set_urbn_defaults.html" class="external-link">set_urbn_defaults</a></span><span class="op">(</span>style <span class="op">=</span> <span class="st">"print"</span><span class="op">)</span></span></code></pre></div>
<p>The function requires a <code>boundaries</code> argument specifying
the geographic area of interest. This must be a spatial polygon object
with a defined coordinate reference system.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Example: Get structures in Washington, DC</span></span>
<span><span class="va">dc_boundary</span> <span class="op">&lt;-</span> <span class="fu">tigris</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tigris/man/states.html" class="external-link">states</a></span><span class="op">(</span>cb <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">STUSPS</span> <span class="op">==</span> <span class="st">"DC"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dc_structures</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_structures.html">get_structures</a></span><span class="op">(</span></span>
<span>  boundaries <span class="op">=</span> <span class="va">dc_boundary</span>,</span>
<span>  geography <span class="op">=</span> <span class="st">"tract"</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Reading layer `DC_Structures' from data source </span></span>
<span><span class="co">#&gt;   `C:\Users\WCurranGroome\Box\METRO Climate and Communities Practice Area\github-repository\built-environment\housing-units\usa-structures\raw\DC\DC_Structures.gdb' </span></span>
<span><span class="co">#&gt;   using driver `OpenFileGDB'</span></span>
<span><span class="co">#&gt; Simple feature collection with 64701 features and 33 fields</span></span>
<span><span class="co">#&gt; Geometry type: MULTIPOLYGON</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -77.11509 ymin: 38.79307 xmax: -76.90971 ymax: 38.99554</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="function-parameters">Function parameters<a class="anchor" aria-label="anchor" href="#function-parameters"></a>
</h2>
<ul>
<li>
<code>boundaries</code>: A POLYGON or MULTIPOLYGON sf object, or an
<code><a href="https://r-spatial.github.io/sf/reference/st_bbox.html" class="external-link">sf::st_bbox()</a></code>-style bounding box. Must have a defined
CRS.</li>
<li>
<code>geography</code>: The desired output geography. One of
<code>"tract"</code> or <code>"county"</code>.</li>
<li>
<code>keep_structures</code>: If <code>TRUE</code>, returns both the
summarized counts and the raw point-level structure data.</li>
</ul>
</div>
<div class="section level2">
<h2 id="data-structure">Data structure<a class="anchor" aria-label="anchor" href="#data-structure"></a>
</h2>
<p>Each row represents a unique combination of geographic unit (tract or
county) and structure type.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://pillar.r-lib.org/reference/glimpse.html" class="external-link">glimpse</a></span><span class="op">(</span><span class="va">dc_structures</span><span class="op">)</span></span>
<span><span class="co">#&gt; Rows: 1,951</span></span>
<span><span class="co">#&gt; Columns: 4</span></span>
<span><span class="co">#&gt; $ GEOID             &lt;chr&gt; "11001000101", "11001000101", "11001000101", "11001000101", "11001000101", "11001000101", "11001000102", "11001000102", "11001000102", "11001…</span></span>
<span><span class="co">#&gt; $ primary_occupancy &lt;chr&gt; "Single Family Dwelling", "Multi - Family Dwelling", "Religious", "Retail Trade", "General Services", "Temporary Lodging", "Single Family Dwe…</span></span>
<span><span class="co">#&gt; $ occupancy_class   &lt;chr&gt; "Residential", "Residential", "Assembly", "Commercial", "Government", "Residential", "Residential", "Residential", "Commercial", "Commercial"…</span></span>
<span><span class="co">#&gt; $ count             &lt;int&gt; 63, 24, 5, 4, 1, 1, 384, 48, 42, 21, 19, 15, 13, 10, 8, 5, 5, 4, 2, 1, 1, 53, 8, 8, 1, 1, 1, 310, 60, 42, 23, 12, 9, 8, 7, 3, 3, 3, 3, 2, 2, …</span></span></code></pre></div>
<p>Key variables include:</p>
<ul>
<li>
<code>GEOID</code>: Census tract (11-digit) or county (5-digit) FIPS
code</li>
<li>
<code>primary_occupancy</code>: The primary use of the structure
(e.g., “Residential”, “Commercial”)</li>
<li>
<code>occupancy_class</code>: Broader classification of occupancy
type</li>
<li>
<code>count</code>: Number of structures of this type in the
geographic unit</li>
</ul>
<div class="section level3">
<h3 id="occupancy-types">Occupancy types<a class="anchor" aria-label="anchor" href="#occupancy-types"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dc_structures</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/distinct.html" class="external-link">distinct</a></span><span class="op">(</span><span class="va">occupancy_class</span>, <span class="va">primary_occupancy</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">occupancy_class</span>, <span class="va">primary_occupancy</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 27 × 2</span></span>
<span><span class="co">#&gt;    occupancy_class primary_occupancy              </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;           &lt;chr&gt;                          </span></span>
<span><span class="co">#&gt;  1 Assembly        Indoor Arena                   </span></span>
<span><span class="co">#&gt;  2 Assembly        Religious                      </span></span>
<span><span class="co">#&gt;  3 Commercial      Entertainment and Recreation   </span></span>
<span><span class="co">#&gt;  4 Commercial      Hospital                       </span></span>
<span><span class="co">#&gt;  5 Commercial      Medical Office/Clinic          </span></span>
<span><span class="co">#&gt;  6 Commercial      Parking                        </span></span>
<span><span class="co">#&gt;  7 Commercial      Personal and Repair Services   </span></span>
<span><span class="co">#&gt;  8 Commercial      Professional/Technical Services</span></span>
<span><span class="co">#&gt;  9 Commercial      Retail Trade                   </span></span>
<span><span class="co">#&gt; 10 Commercial      Theaters                       </span></span>
<span><span class="co">#&gt; # ℹ 17 more rows</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="example-analyses">Example analyses<a class="anchor" aria-label="anchor" href="#example-analyses"></a>
</h2>
<div class="section level3">
<h3 id="structure-composition-by-tract">Structure composition by tract<a class="anchor" aria-label="anchor" href="#structure-composition-by-tract"></a>
</h3>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dc_summary</span> <span class="op">&lt;-</span> <span class="va">dc_structures</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span></span>
<span>    .by <span class="op">=</span> <span class="va">GEOID</span>,</span>
<span>    total_structures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">count</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    residential <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">count</span><span class="op">[</span><span class="va">occupancy_class</span> <span class="op">==</span> <span class="st">"Residential"</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    commercial <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">count</span><span class="op">[</span><span class="va">occupancy_class</span> <span class="op">==</span> <span class="st">"Commercial"</span><span class="op">]</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    residential_share <span class="op">=</span> <span class="va">residential</span> <span class="op">/</span> <span class="va">total_structures</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dc_summary</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">total_structures</span>, y <span class="op">=</span> <span class="va">residential_share</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/percent_format.html" class="external-link">percent</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Residential Share vs. Total Structures by Tract"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Washington, DC census tracts"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Total structures"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Share residential"</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="figure/get_structures-tract-composition-1.png" alt="plot of chunk tract-composition"><div class="figcaption">plot of chunk tract-composition</div>
</div>
</div>
<div class="section level3">
<h3 id="mapping-structure-density">Mapping structure density<a class="anchor" aria-label="anchor" href="#mapping-structure-density"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dc_tracts</span> <span class="op">&lt;-</span> <span class="fu">tigris</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tigris/man/tracts.html" class="external-link">tracts</a></span><span class="op">(</span>state <span class="op">=</span> <span class="st">"DC"</span>, cb <span class="op">=</span> <span class="cn">TRUE</span>, year <span class="op">=</span> <span class="fl">2023</span>, progress_bar <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://r-spatial.github.io/sf/reference/st_transform.html" class="external-link">st_transform</a></span><span class="op">(</span><span class="fl">5070</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dc_tract_totals</span> <span class="op">&lt;-</span> <span class="va">dc_structures</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span></span>
<span>    .by <span class="op">=</span> <span class="va">GEOID</span>,</span>
<span>    total_structures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">count</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">dc_map</span> <span class="op">&lt;-</span> <span class="va">dc_tracts</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">dc_tract_totals</span>, by <span class="op">=</span> <span class="st">"GEOID"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">dc_map</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="va">total_structures</span><span class="op">)</span>, color <span class="op">=</span> <span class="st">"white"</span>, linewidth <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/urbnthemes/man/scale_fill_gradientn.html" class="external-link">scale_fill_gradientn</a></span><span class="op">(</span></span>
<span>    colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">palette_urbn_cyan</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="va">palette_urbn_cyan</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span>, <span class="va">palette_urbn_cyan</span><span class="op">[</span><span class="fl">7</span><span class="op">]</span><span class="op">)</span>,</span>
<span>    labels <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="va"><a href="https://scales.r-lib.org/reference/comma.html" class="external-link">comma</a></span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Structure Count by Census Tract"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Washington, DC"</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"Structures"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/urbnthemes/man/theme_urbn_map.html" class="external-link">theme_urbn_map</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="float">
<img src="figure/get_structures-map-structures-1.png" alt="plot of chunk map-structures"><div class="figcaption">plot of chunk map-structures</div>
</div>
</div>
<div class="section level3">
<h3 id="analyzing-structures-in-a-disaster-area">Analyzing structures in a disaster area<a class="anchor" aria-label="anchor" href="#analyzing-structures-in-a-disaster-area"></a>
</h3>
<p>A common use case is estimating structures within a hazard-affected
area. This example shows how to combine structure data with wildfire
burn zones.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get a specific wildfire's burn zone</span></span>
<span><span class="va">burn_zones</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_wildfire_burn_zones.html">get_wildfire_burn_zones</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">camp_fire</span> <span class="op">&lt;-</span> <span class="va">burn_zones</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">wildfire_name</span>, <span class="st">"CAMP"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get structures within the burn zone</span></span>
<span><span class="va">camp_fire_structures</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_structures.html">get_structures</a></span><span class="op">(</span></span>
<span></span>
<span>  boundaries <span class="op">=</span> <span class="va">camp_fire</span>,</span>
<span>  geography <span class="op">=</span> <span class="st">"tract"</span>,</span>
<span>  keep_structures <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Summarized counts</span></span>
<span><span class="va">camp_fire_structures</span><span class="op">$</span><span class="va">structures_summarized</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span></span>
<span>    .by <span class="op">=</span> <span class="va">occupancy_class</span>,</span>
<span>    total <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">count</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/desc.html" class="external-link">desc</a></span><span class="op">(</span><span class="va">total</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="working-with-raw-structure-data">Working with raw structure data<a class="anchor" aria-label="anchor" href="#working-with-raw-structure-data"></a>
</h3>
<p>Setting <code>keep_structures = TRUE</code> returns both the
summarized data and the raw point-level structure data.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dc_full</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_structures.html">get_structures</a></span><span class="op">(</span></span>
<span>  boundaries <span class="op">=</span> <span class="va">dc_boundary</span>,</span>
<span>  geography <span class="op">=</span> <span class="st">"county"</span>,</span>
<span>  keep_structures <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Access the raw point data</span></span>
<span><span class="va">raw_structures</span> <span class="op">&lt;-</span> <span class="va">dc_full</span><span class="op">$</span><span class="va">structures_raw</span></span>
<span></span>
<span><span class="co"># Access the summarized data</span></span>
<span><span class="va">summary_structures</span> <span class="op">&lt;-</span> <span class="va">dc_full</span><span class="op">$</span><span class="va">structures_summarized</span></span>
<span></span>
<span><span class="co"># Map individual structures</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">dc_boundary</span>, fill <span class="op">=</span> <span class="st">"grey95"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggsf.html" class="external-link">geom_sf</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">raw_structures</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">primary_occupancy</span> <span class="op">==</span> <span class="st">"Commercial"</span><span class="op">)</span>,</span>
<span>    size <span class="op">=</span> <span class="fl">0.1</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Commercial Structures in Washington, DC"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/urbnthemes/man/theme_urbn_map.html" class="external-link">theme_urbn_map</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="county-level-analysis">County-level analysis<a class="anchor" aria-label="anchor" href="#county-level-analysis"></a>
</h3>
<p>For larger areas, county-level aggregation provides a useful
summary.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get structures for multiple states</span></span>
<span><span class="va">southeast_boundary</span> <span class="op">&lt;-</span> <span class="fu">tigris</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/tigris/man/states.html" class="external-link">states</a></span><span class="op">(</span>cb <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">STUSPS</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"FL"</span>, <span class="st">"GA"</span>, <span class="st">"AL"</span>, <span class="st">"SC"</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">southeast_structures</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_structures.html">get_structures</a></span><span class="op">(</span></span>
<span>  boundaries <span class="op">=</span> <span class="va">southeast_boundary</span>,</span>
<span>  geography <span class="op">=</span> <span class="st">"county"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Summarize by county</span></span>
<span><span class="va">county_totals</span> <span class="op">&lt;-</span> <span class="va">southeast_structures</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span></span>
<span>    .by <span class="op">=</span> <span class="va">GEOID</span>,</span>
<span>    total_structures <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">count</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="performance-considerations">Performance considerations<a class="anchor" aria-label="anchor" href="#performance-considerations"></a>
</h2>
<p>The raw building footprint data files are large. Processing can be
slow, especially for multi-state analyses. Consider:</p>
<ul>
<li>Starting with a small geographic area to test your workflow</li>
<li>Using county-level aggregation when tract-level detail is not
required</li>
<li>Caching results for repeated analyses</li>
</ul>
</div>
<div class="section level2">
<h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a>
</h2>
<ul>
<li>
<code><a href="../reference/get_wildfire_burn_zones.html">get_wildfire_burn_zones()</a></code>: Wildfire burn zone disasters
for use as boundaries</li>
<li>
<code><a href="../reference/get_current_fire_perimeters.html">get_current_fire_perimeters()</a></code>: Active wildfire
perimeters for use as boundaries</li>
<li>
<code><a href="../reference/get_fema_disaster_declarations.html">get_fema_disaster_declarations()</a></code>: FEMA disaster
declarations</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Will Curran-Groome, Kameron Lloyd.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
